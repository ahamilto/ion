
<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Middleware Package &mdash; TJ Intranet v3 (Build #6) documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-3.2.0/css/bootstrap-theme.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v3 (Build #6)',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.2.0/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="TJ Intranet v3 (Build #6) documentation" href="../index.html" />
    <link rel="up" title="Source Code Documentation" href="intranet.html" />
    <link rel="next" title="Settings Package" href="intranet.settings.html" />
    <link rel="prev" title="Database Package" href="intranet.db.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          TJ Intranet</a>
        <span class="navbar-text navbar-version pull-left"><b>v3</b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Topics <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../setup/index.html">Setup</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../setup/sandbox.html">Setting up Your Sandbox</a></li>
<li class="toctree-l2"><a class="reference internal" href="../setup/server.html">Setting up the Server</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../architecture/index.html#technologies">Technologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/index.html#resources">Resources</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../developing/index.html">Developing for Intranet</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../developing/styleguide.html">Coding Style Guide</a></li>
<li class="toctree-l2"><a class="reference internal" href="../developing/workflow.html">Workflow</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="intranet.html">Source Code Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="intranet.apps.html">Apps Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="intranet.db.html">Database Package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Middleware Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="intranet.settings.html">Settings Package</a></li>
<li class="toctree-l2"><a class="reference internal" href="intranet.utils.html">Utils Package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../administration/index.html">Administration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../administration/index.html#task-1">Task 1</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration/index.html#task-2">Task 2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../administration/index.html#task-3">Task 3</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Section <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">Middleware Package</a><ul>
<li><a class="reference internal" href="#module-intranet.middleware.environment"><tt class="docutils literal"><span class="pre">environment</span></tt> Module</a></li>
<li><a class="reference internal" href="#module-intranet.middleware.templates"><tt class="docutils literal"><span class="pre">templates</span></tt> Module</a></li>
<li><a class="reference internal" href="#threadlocals-module"><tt class="docutils literal"><span class="pre">threadlocals</span></tt> Module</a></li>
</ul>
</li>
</ul>
</ul>
</li>
              
            
            
              
                
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="col-md-12">
      
  <div class="section" id="middleware-package">
<h1>Middleware Package<a class="headerlink" href="#middleware-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-intranet.middleware.environment">
<span id="environment-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">environment</span></tt> Module<a class="headerlink" href="#module-intranet.middleware.environment" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="intranet.middleware.environment.KerberosCacheMiddleware">
<em class="property">class </em><tt class="descclassname">intranet.middleware.environment.</tt><tt class="descname">KerberosCacheMiddleware</tt><a class="reference internal" href="../_modules/intranet/middleware/environment.html#KerberosCacheMiddleware"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.environment.KerberosCacheMiddleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Reloads the KRB5CCNAME environmental variable from the session
for potential use in future LDAP requests.</p>
<p>For a login request, the KRB5CCNAME environmental variable has
already been set in the authentication backend, but for all other
requests, it must be reset from the Kerberos cache stored in a
user&#8217;s session. Otherwise all requests to a a particular Gunicorn
worker would use the Kerberos cache of the user who most recently
logged in through that worker.</p>
<p>The environmental variable must be set by middleware so it is
available for requests to any view and so each view does not have
to load the environmental variable. The LDAP wrapper
(intranet.db.ldap_db) cannot set the environmental variable because
it does not have access to the current session (request.session).</p>
<dl class="method">
<dt id="intranet.middleware.environment.KerberosCacheMiddleware.process_request">
<tt class="descname">process_request</tt><big>(</big><em>request</em><big>)</big><a class="reference internal" href="../_modules/intranet/middleware/environment.html#KerberosCacheMiddleware.process_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.environment.KerberosCacheMiddleware.process_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Propogate KRB5CCNAME session variable to the environmental
variable</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-intranet.middleware.templates">
<span id="templates-module"></span><h2><tt class="xref py py-mod docutils literal"><span class="pre">templates</span></tt> Module<a class="headerlink" href="#module-intranet.middleware.templates" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="intranet.middleware.templates.StripNewlinesMiddleware">
<em class="property">class </em><tt class="descclassname">intranet.middleware.templates.</tt><tt class="descname">StripNewlinesMiddleware</tt><a class="reference internal" href="../_modules/intranet/middleware/templates.html#StripNewlinesMiddleware"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.templates.StripNewlinesMiddleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Strip extra newlines from rendered templates to
enhance readability.</p>
<dl class="method">
<dt id="intranet.middleware.templates.StripNewlinesMiddleware.process_response">
<tt class="descname">process_response</tt><big>(</big><em>request</em>, <em>response</em><big>)</big><a class="reference internal" href="../_modules/intranet/middleware/templates.html#StripNewlinesMiddleware.process_response"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.templates.StripNewlinesMiddleware.process_response" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the response and strip extra newlines from HTML.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="threadlocals-module">
<h2><tt class="xref py py-mod docutils literal"><span class="pre">threadlocals</span></tt> Module<a class="headerlink" href="#threadlocals-module" title="Permalink to this headline">¶</a></h2>
<span class="target" id="module-intranet.middleware.threadlocals"></span><dl class="class">
<dt id="intranet.middleware.threadlocals.ThreadLocalsMiddleware">
<em class="property">class </em><tt class="descclassname">intranet.middleware.threadlocals.</tt><tt class="descname">ThreadLocalsMiddleware</tt><a class="reference internal" href="../_modules/intranet/middleware/threadlocals.html#ThreadLocalsMiddleware"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.threadlocals.ThreadLocalsMiddleware" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference external" href="http://docs.python.org/library/functions.html#object" title="(in Python v2.7)"><tt class="xref py py-class docutils literal"><span class="pre">object</span></tt></a></p>
<p>Stores the current authorized User object in thread locals for
access in models (and elsewhere) without passing the user around as
an argument.</p>
<dl class="method">
<dt id="intranet.middleware.threadlocals.ThreadLocalsMiddleware.process_request">
<tt class="descname">process_request</tt><big>(</big><em>request</em><big>)</big><a class="reference internal" href="../_modules/intranet/middleware/threadlocals.html#ThreadLocalsMiddleware.process_request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.threadlocals.ThreadLocalsMiddleware.process_request" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes the request.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="intranet.middleware.threadlocals.request">
<tt class="descclassname">intranet.middleware.threadlocals.</tt><tt class="descname">request</tt><big>(</big><big>)</big><a class="reference internal" href="../_modules/intranet/middleware/threadlocals.html#request"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#intranet.middleware.threadlocals.request" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the currently authorized User object.</p>
<dl class="docutils">
<dt>Returns:</dt>
<dd>User object</dd>
</dl>
</dd></dl>

</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
      
    </p>
    <p>
        &copy; Copyright 2015, TJ Intranet Development Team.<br/>
    </p>
  </div>
</footer>
  </body>
</html>